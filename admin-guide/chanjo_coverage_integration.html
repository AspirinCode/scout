
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Chanjo coverage integration Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="indexes.html" />
    
    
    <link rel="prev" href="server.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../install.html">
            
                <a href="../install.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../faq.html">
            
                <a href="../faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../features/">
            
                <a href="../features/">
            
                    
                    Features
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../features/hpo.html">
            
                <a href="../features/hpo.html">
            
                    
                    HPO phenotypes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../user-guide/">
            
                <a href="../user-guide/">
            
                    
                    User Guide
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../user-guide/getting-started.html">
            
                <a href="../user-guide/getting-started.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../user-guide/using-scout.html">
            
                <a href="../user-guide/using-scout.html">
            
                    
                    General Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../user-guide/pages.html">
            
                <a href="../user-guide/pages.html">
            
                    
                    Pages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../user-guide/institutes.html">
            
                <a href="../user-guide/institutes.html">
            
                    
                    Institutes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../user-guide/users.html">
            
                <a href="../user-guide/users.html">
            
                    
                    Users
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../user-guide/cases.html">
            
                <a href="../user-guide/cases.html">
            
                    
                    Cases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../user-guide/variants.html">
            
                <a href="../user-guide/variants.html">
            
                    
                    Variants
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="../user-guide/genes.html">
            
                <a href="../user-guide/genes.html">
            
                    
                    Genes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="../user-guide/panels.html">
            
                <a href="../user-guide/panels.html">
            
                    
                    Gene Panels
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.10" data-path="../user-guide/annotations.html">
            
                <a href="../user-guide/annotations.html">
            
                    
                    Annotations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.11" data-path="../user-guide/acmg-criterias.html">
            
                <a href="../user-guide/acmg-criterias.html">
            
                    
                    ACMG criterias
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="./">
            
                <a href="./">
            
                    
                    Admin Guide
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="setup-scout.html">
            
                <a href="setup-scout.html">
            
                    
                    Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="loading.html">
            
                <a href="loading.html">
            
                    
                    Loading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="load-config.html">
            
                <a href="load-config.html">
            
                    
                    Load config
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="genes.html">
            
                <a href="genes.html">
            
                    
                    Gene definitions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="hpo.html">
            
                <a href="hpo.html">
            
                    
                    HPO terms
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="annotations.html">
            
                <a href="annotations.html">
            
                    
                    Annotations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="server.html">
            
                <a href="server.html">
            
                    
                    Server
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.6.8" data-path="chanjo_coverage_integration.html">
            
                <a href="chanjo_coverage_integration.html">
            
                    
                    Chanjo coverage integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="indexes.html">
            
                <a href="indexes.html">
            
                    
                    Indexes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10" data-path="institute.html">
            
                <a href="institute.html">
            
                    
                    Institutes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../blog/">
            
                <a href="../blog/">
            
                    
                    Blog
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../blog/new-3.0.html">
            
                <a href="../blog/new-3.0.html">
            
                    
                    What's new in 3.0?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../blog/new-3.1.html">
            
                <a href="../blog/new-3.1.html">
            
                    
                    What's new in 3.1?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../blog/new-3.2.html">
            
                <a href="../blog/new-3.2.html">
            
                    
                    What's new in 3.2?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../blog/new-3.3.html">
            
                <a href="../blog/new-3.3.html">
            
                    
                    What's new in 3.3?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../blog/new-3.4.html">
            
                <a href="../blog/new-3.4.html">
            
                    
                    What's new in 3.4?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../blog/new-3.5.html">
            
                <a href="../blog/new-3.5.html">
            
                    
                    What's new in 3.5?
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Chanjo coverage integration</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="chanjo-coverage-integration">Chanjo coverage integration</h1>
<p>Scout may be configured to visualize coverage reports produced by <a href="https://github.com/Clinical-Genomics/chanjo" target="_blank">Chanjo</a>.
To do so it is necessary to install the python package <a href="https://github.com/Clinical-Genomics/chanjo" target="_blank">Chanjo</a> and its report visualization app, <a href="https://github.com/robinandeer/chanjo-report" target="_blank">chanjo-report</a>.</p>
<p>Both these programs require a database to store samples names, transcript specifications and statistics relative to the trascript coverage for all samples. Note that chanjo can be used as a standalone but chanjo-report needs to have access to the data produced by chanjo to generate coverage reports. <strong>Scout does not require chanjo installed in the path to visualize coverage reports, but it is necessary to install chanjo-report and set up the connection to a database containing coverage data in order to use this fuctionality</strong>.</p>
<h2 id="chanjo-database">Chanjo database</h2>
<p>Chanjo-report (and chanjo) work with MySQL and SQLite databases. This guide explains how to set up a MySQL database since this database is the one used in production at Clinical Genomics. For a guide on how to install MySQL on your server click <a href="https://dev.mysql.com/doc/mysql-getting-started/en/" target="_blank">here</a>. <br>
Once the database and the administrator user and password are configured, you can create the new database to contain the chanjo structures. To do so, from a terminal type:</p>
<pre><code class="lang-bash">mysql -u admin_user -padmin_password <span class="hljs-comment">#no space between -p and password</span>
mysql&gt; create database chanjo4_demo;
mysql&gt; <span class="hljs-built_in">exit</span>
</code></pre>
<p>To create a new empty database download the empty schema <code>chanjo4_structure.sql</code> under <code>scout/demo/resources</code>. The command to restore the database from this dump file is:</p>
<pre><code class="lang-bash">mysql -u admin_user -padmin_password chanjo4_demo &lt; path/to/chanjo4_structure.sql <span class="hljs-comment">#no space between -p and password</span>
</code></pre>
<p>To create instead a demo database containing coverage data for genes in panel1 for the samples used in the demo version of scout, you might download the schema <code>chanjo4_demo.sql</code>. This file is present in the folder <code>scout/demo</code>, along with the rest of the demo data. The syntax to create the database is the same as above.</p>
<p>Chanjo database consists of 3 tables:</p>
<ul>
<li><strong>sample</strong>:</li>
</ul>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Null</th>
<th>Key</th>
<th>Default</th>
<th>Extra</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>varchar(32)</td>
<td>NO</td>
<td>PRI</td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>group_id</td>
<td>varchar(128)</td>
<td>YES</td>
<td>MUL</td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>source</td>
<td>varchar(256)</td>
<td>YES</td>
<td></td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>created_at</td>
<td>datetime</td>
<td>YES</td>
<td></td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>varchar(128)</td>
<td>YES</td>
<td></td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>group_name</td>
<td>varchar(128)</td>
<td>YES</td>
<td></td>
<td>NULL</td>
<td>&#xA0;</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>transcript</strong>:</li>
</ul>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Null</th>
<th>Key</th>
<th>Default</th>
<th>Extra</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>varchar(32)</td>
<td>NO</td>
<td>PRI</td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>gene_id</td>
<td>int(11)</td>
<td>NO</td>
<td>MUL</td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>gene_name</td>
<td>varchar(32)</td>
<td>YES</td>
<td>MUL</td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>chromosome</td>
<td>varchar(10)</td>
<td>YES</td>
<td></td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>length</td>
<td>int(11)</td>
<td>YES</td>
<td></td>
<td>NULL</td>
<td>&#xA0;</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>transcript_stat</strong>:</li>
</ul>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Null</th>
<th>Key</th>
<th>Default</th>
<th>Extra          </th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int(11)</td>
<td>NO</td>
<td>PRI</td>
<td>NULL</td>
<td>auto_increment</td>
</tr>
<tr>
<td>mean_coverage</td>
<td>float</td>
<td>NO</td>
<td></td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>completeness_10</td>
<td>float</td>
<td>YES</td>
<td></td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>completeness_15</td>
<td>float</td>
<td>YES</td>
<td></td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>completeness_20</td>
<td>float</td>
<td>YES</td>
<td></td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>completeness_50</td>
<td>float</td>
<td>YES</td>
<td></td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>completeness_100</td>
<td>float</td>
<td>YES</td>
<td></td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>threshold</td>
<td>int(11)</td>
<td>YES</td>
<td></td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>_incomplete_exons</td>
<td>text</td>
<td>YES</td>
<td></td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>sample_id</td>
<td>varchar(32)</td>
<td>NO</td>
<td>MUL</td>
<td>NULL</td>
<td></td>
</tr>
<tr>
<td>transcript_id</td>
<td>varchar(32)</td>
<td>NO</td>
<td>MUL</td>
<td>NULL</td>
<td>&#xA0;</td>
</tr>
</tbody>
</table>
<h2 id="chanjo-report">chanjo-report</h2>
<p>This package might be downloaded and installed via <code>git clone</code> and using <code>pip install</code> command (instructions <a href="https://github.com/robinandeer/chanjo-report" target="_blank">here</a>), but perhaps the easiest way to make sure that it will serve pages once the app is invoked by scout is to install it with this command:</p>
<pre><code class="lang-bash">pip install scout-browser[coverage]
</code></pre>
<p>Just make sure that both scout and chanjo-report are installed on the same virtual environment (if you are using one).
Note that chanjo-report requires the package pymysql if it will be connecting to a MySQL database. So if it is not found in the environment you can install it with this command:</p>
<pre><code class="lang-bash">pip install pymysql
</code></pre>
<h2 id="enabling-the-chanjo-coverage-integration-in-scout">Enabling the chanjo coverage integration in scout</h2>
<p>In order to enable the support for the coverage report visualization in scout the configuration file named <code>config.py</code> under <code>scout/server</code> must be modified to include the following line:</p>
<p><pre>
SQLALCHEMY_DATABASE_URI = &apos;mysql+pymysql://username:password@host:port/chanjo4_demo&apos;
</pre>
The database URI provided in the line above refers to the MySQL database with the coverage data, so user and password are those used to connect to the database. Default database host and port are <code>localhost</code> and <code>3306</code> respectively.
If your scout implementation is using another configuration file other than the default <code>config.py</code> then the database connection URI must be added to this file instead.</p>
<p><br>
Once all the above steps are executed you should see the &quot;Coverage report&quot; option on the left side bar under the scout case page. The buttons allow to generate HTML and PDF reports for the case samples.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="server.html" class="navigation navigation-prev " aria-label="Previous page: Server">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="indexes.html" class="navigation navigation-next " aria-label="Next page: Indexes">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Chanjo coverage integration","level":"1.6.8","depth":2,"next":{"title":"Indexes","level":"1.6.9","depth":2,"path":"admin-guide/indexes.md","ref":"admin-guide/indexes.md","articles":[]},"previous":{"title":"Server","level":"1.6.7","depth":2,"path":"admin-guide/server.md","ref":"admin-guide/server.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"admin-guide/chanjo_coverage_integration.md","mtime":"2018-06-08T09:03:26.475Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2018-06-08T09:04:28.653Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

