{% extends 'layouts/base.html' %}
{% from 'macros/_polymer.html' import core_item %}

{% block css %}
  {{ super() }}
{% endblock %}

{% block body %}

  <div id="app">
    <drawer-panel v-ref="drawer">
      {% block main_drawer %}
        {{ core_item('Home', icon='home', href=url_for('frontend.index')) }}

        {{ core_item('User Guide', icon='book', href='https://github.com/Clinical-Genomics/scout/tree/master/docs/source') }}

        {{ core_item('Changes', icon='history', href='https://github.com/Clinical-Genomics/scout/blob/master/docs/source/index.md') }}

        {% if current_user.has_role('admin') %}
          {{ core_item('Admin', icon='create', href='/admin') }}
        {% endif %}

        {{ core_item('Logout', icon='close', onclick="document.querySelector('#hidden-logout').click();") }}
        <form action="{{ url_for('login.logout') }}" method="POST">
          <button type="submit" id="hidden-logout" class="hidden-submit"></button>
        </form>
      {% endblock %}
    </drawer-panel>

    <div class="md-toolbar-wrapper">
      <div class="md-toolbar">
        {% block toolbar %}

          {% block toolbar_left %}
            <div v-on="click: showDrawer" class="icon-button">
              <core-icon v-with="icon: 'menu'"></core-icon>
            </div>
          {% endblock %}

          {% block toolbar_right %}
            <a class="md-toolbar-user" href="{{ url_for('user.profile', user_id=current_user.id) }}">
              <div class="md-toolbar-user-name">{{ current_user.name|initials }}</div>
              <div class="md-toolbar-user-icon">
                <core-icon v-with="icon: 'account-circle'"></core-icon>
              </div>
            </a>
          {% endblock %}

        {% endblock %}
      </div>

      {% block toolbar_custom %}
        {# Still fixed but below the toolbar #}
        <div class="md-toolbar is-secondary">
          {% block toolbar_secondary %}{% endblock %}
        </div>
      {% endblock %}

      <div class="md-toolbar-content">
        {% block content %}{% endblock %}
      </div>
    </div>
  </div>

{% endblock %}
